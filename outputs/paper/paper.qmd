---
title: "My title"
subtitle: "My subtitle if needed"
author: 
  - First author
  - Another author
thanks: "Code and data are available at: LINK."
date: "`r Sys.time()`"
date-format: "D MMMM YYYY"
abstract: "First sentence. Second sentence. Third sentence. Fourth sentence."
format: pdf
number-sections: true
bibliography: references.bib
---



# Introduction

You can and should cross-reference sections and sub-sections. For instance, @sec-data and @sec-first-point. 

# Methodology

```{r setup, include=FALSE}}
knitr::opts_chunk$set(echo = FALSE)
knitr::opts_chunk$set(warning = FALSE)
knitr::opts_chunk$set(message = FALSE)
knitr::opts_chunk$set(fig.width=6.5, fig.height=2.8) 

# loading in relevant libraries
library(RColorBrewer)
library(tidyverse)
library(dplyr, warn.conflicts = FALSE)
library(tidyr)
library(readxl)
library(data.table)
library(lubridate)
library(haven)
library(readxl)
library(ggplot2)

### Input data ###
happiness_data<-read.csv(here::here("outputs/data/happiness_data.csv"))
sex_data<-read.csv(here::here("outputs/data/sex_data.csv"))
race_data<-read.csv(here::here("outputs/data/race_data.csv"))
degree_data<-read.csv(here::here("outputs/data/degree_data.csv"))
employee_status_data<-read.csv(here::here("outputs/data/employee_status_data.csv"))
marital_status_data<-read.csv(here::here("outputs/data/marital_status_data.csv"))


```

# Results
```{r}
#| message: false
#| warning: false
#| echo: false
#| label: fig-1Happiness
#| fig-cap: "Changes in happiness levels from 1972 to 2021"

# generate graph
happy_colors <- c("#FF7F00", "#1F78B4", "#33A02C")

ggplot(happiness_data, aes(x = Year, y = People, fill = Happy)) +
  geom_line(aes(group = Happy, color = Happy), size = 1.2) +
  scale_fill_manual(values = happy_colors) +
  scale_color_manual(values = happy_colors) +
  labs(x = "Year", y = "Number of Respondents", fill = "Happy Level", 
       title = "Changes in happiness levels from 1972 to 2021",
       color = "Happy level")

```



```{r}
#| message: false
#| warning: false
#| echo: false
#| label: fig-2VeryHappyGender
#| fig-cap: "Trends in happiness level (very happy) by gender from 1972 to 2021"

# calculate the count of individuals for very happy level
sex_data_happy1 <- sex_data %>% 
  filter(Happy == "Very happy") %>% 
  group_by(Sex, Year, Happy) %>% 
  summarize(People = n())

# generate graph
sex_colors <- c("#E74C3C", "#2C3E50")

ggplot(sex_data_happy1, aes(x = Year, y = People, fill = Sex)) +
  geom_line(aes(group = Sex, color = Sex), size = 1.2) +
  scale_fill_manual(values = sex_colors) +
  scale_color_manual(values = sex_colors) +
  labs(x = "Year", y = "Number of respondents", fill = "Sex", title = "Trends in happiness level (very happy) by gender from 1972 to 2021")

```
```{r}
#| message: false
#| warning: false
#| echo: false
#| label: fig-3PrettyHappyGender
#| fig-cap: "Trends in happiness level (pretty happy) by gender from 1972 to 2021"

# calculate the count of individuals for pretty happy level
sex_data_happy2 <- sex_data %>% 
  filter(Happy == "Pretty happy") %>% 
  group_by(Sex, Year, Happy) %>% 
  summarize(People = n())

# generate graph
sex_colors <- c("#E74C3C", "#2C3E50")

ggplot(sex_data_happy2, aes(x = Year, y = People, fill = Sex)) +
  geom_line(aes(group = Sex, color = Sex), size = 1.2) +
  scale_fill_manual(values = sex_colors) +
  scale_color_manual(values = sex_colors) +
  labs(x = "Year", y = "Number of respondents", fill = "Sex", title = "Trends in happiness level (pretty happy) by gender from 1972 to 2021")

```

```{r}
#| message: false
#| warning: false
#| echo: false
#| label: fig-4NotTooHappyGender
#| fig-cap: "Trends in happiness level (not too happy) by gender from 1972 to 2021"

# calculate the count of individuals for not too happy level
sex_data_happy3 <- sex_data %>% 
  filter(Happy == "Not too happy") %>% 
  group_by(Sex, Year, Happy) %>% 
  summarize(People = n())

# generate graph
sex_colors <- c("#E74C3C", "#2C3E50")

ggplot(sex_data_happy3, aes(x = Year, y = People, fill = Sex)) +
  geom_line(aes(group = Sex, color = Sex), size = 1.2) +
  scale_fill_manual(values = sex_colors) +
  scale_color_manual(values = sex_colors) +
  labs(x = "Year", y = "Number of respondents", fill = "Sex", title = "Trends in happiness level (not too happy) by gender from 1972 to 2021")

```

```{r}
#| message: false
#| warning: false
#| echo: false
#| label: fig-5VeryHappyRace
#| fig-cap: "Trends in happiness level (very happy) by race from 1972 to 2021"

# calculate the count of individuals for very happy level
race_data_happy1 <- race_data %>% 
  filter(Happy == "Very happy") %>% 
  group_by(Race, Year, Happy) %>% 
  summarize(People = n())

# generate graph
race_colors <- c("#3498DB", "#27AE60", "#F39C12")

ggplot(race_data_happy1, aes(x = Year, y = People, fill = Race)) +
  geom_line(aes(group = Race, color = Race), size = 1.2) +
  scale_fill_manual(values = race_colors) +
  scale_color_manual(values = race_colors) +
  labs(x = "Year", y = "Number of respondents", fill = "Race", title = "Trends in happiness level (very happy) by race from 1972 to 2021")

```

```{r}
#| message: false
#| warning: false
#| echo: false
#| label: fig-6PrettyHappyRace
#| fig-cap: "Trends in happiness level (pretty happy) by race from 1972 to 2021"

# calculate the count of individuals for pretty happy level
race_data_happy2 <- race_data %>% 
  filter(Happy == "Pretty happy") %>% 
  group_by(Race, Year, Happy) %>% 
  summarize(People = n())

# generate graph
race_colors <- c("#3498DB", "#27AE60", "#F39C12")

ggplot(race_data_happy2, aes(x = Year, y = People, fill = Race)) +
  geom_line(aes(group = Race, color = Race), size = 1.2) +
  scale_fill_manual(values = race_colors) +
  scale_color_manual(values = race_colors) +
  labs(x = "Year", y = "Number of respondents", fill = "Race", title = "Trends in happiness level (pretty happy) by race from 1972 to 2021")

```



```{r}
#| message: false
#| warning: false
#| echo: false
#| label: fig-7NotTooHappyRace
#| fig-cap: "Trends in happiness level (not too happy) by race from 1972 to 2021"

# calculate the count of individuals for not too happy level
race_data_happy3 <- race_data %>% 
  filter(Happy == "Not too happy") %>% 
  group_by(Race, Year, Happy) %>% 
  summarize(People = n())

# generate graph
race_colors <- c("#3498DB", "#27AE60", "#F39C12")

ggplot(race_data_happy3, aes(x = Year, y = People, fill = Race)) +
  geom_line(aes(group = Race, color = Race), size = 1.2) +
  scale_fill_manual(values = race_colors) +
  scale_color_manual(values = race_colors) +
  labs(x = "Year", y = "Number of respondents", fill = "Race", title = "Trends in happiness level (not too happy) by race from 1972 to 2021")

```




```{r}
#| message: false
#| warning: false
#| echo: false
#| label: fig-8LessHighSchool
#| fig-cap: "Changes in happiness levels of individuals with less than high school education from 1972 to 2021"

# calcualte the people who have less than high school degree based on different level of happy
degree_data_1 <- degree_data %>% 
  filter(Degree == "Less than high school") %>% 
  group_by(Year, Happy) %>% 
  summarize(People = n())

# generate graph
degree_colors <- c("#E74C3C", "#F1C40F", "#8E44AD")


ggplot(degree_data_1, aes(x = Year, y = People, fill = Happy)) +
  geom_line(aes(group = Happy, color = Happy), size = 1.2) +
  scale_fill_manual(values = degree_colors) +
  scale_color_manual(values = degree_colors) +
  labs(x = "Year", y = "Number of respondents", fill = "Happy level", title = "Changes in happiness levels of individuals \nwith less than high school education from 1972 to 2021", color = "Happy level")

```
```{r}
#| message: false
#| warning: false
#| echo: false
#| label: fig-9HighSchool
#| fig-cap: "Changes in happiness levels of individuals with high school education from 1972 to 2021"

# calcualte the people who have high school degree based on different level of happy
degree_data_2 <- degree_data %>% 
  filter(Degree == "High school") %>% 
  group_by(Year, Happy) %>% 
  summarize(People = n())

# generate graph
degree_colors <- c("#E74C3C", "#F1C40F", "#8E44AD")

ggplot(degree_data_2, aes(x = Year, y = People, fill = Happy)) +
  geom_line(aes(group = Happy, color = Happy), size = 1.2) +
  scale_fill_manual(values = degree_colors) +
  scale_color_manual(values = degree_colors) +
  labs(x = "Year", y = "Number of respondents", fill = "Happy level", title = "Changes in happiness levels of individuals \nwith high school education from 1972 to 2021", color = "Happy level")

```
```{r}
#| message: false
#| warning: false
#| echo: false
#| label: fig-10AssociateCollege
#| fig-cap: "Changes in happiness levels of individuals with associate/junior college education from 1972 to 2021"

# calcualte the people who have associate/junior college degree based on different level of happy
degree_data_3 <- degree_data %>% 
  filter(Degree == "Associate/junior college") %>% 
  group_by(Year, Happy) %>% 
  summarize(People = n())

# generate graph
degree_colors <- c("#E74C3C", "#F1C40F", "#8E44AD")

ggplot(degree_data_3, aes(x = Year, y = People, fill = Happy)) +
  geom_line(aes(group = Happy, color = Happy), size = 1.2) +
  scale_fill_manual(values = degree_colors) +
  scale_color_manual(values = degree_colors) +
  labs(x = "Year", y = "Number of respondents", fill = "Happy level", title = "Changes in happiness levels of individuals \nwith associate/junior college education from 1972 to 2021", color = "Happy level")
```

```{r}
#| message: false
#| warning: false
#| echo: false
#| label: fig-11Bachelor
#| fig-cap: "Changes in happiness levels of individuals with bachelor's education from 1972 to 2021"

# calcualte the people who have Bachelor's degree based on different level of happy
degree_data_4 <- degree_data %>% 
  filter(Degree == "Bachelor's") %>% 
  group_by(Year, Happy) %>% 
  summarize(People = n())

# generate graph
degree_colors <- c("#E74C3C", "#F1C40F","#8E44AD")

ggplot(degree_data_4, aes(x = Year, y = People, fill = Happy)) +
  geom_line(aes(group = Happy, color = Happy), size = 1.2) +
  scale_fill_manual(values = degree_colors) +
  scale_color_manual(values = degree_colors) +
  labs(x = "Year", y = "Number of respondents", fill = "Happy level", title = "Changes in happiness levels of individuals \nwith bachelor's education from 1972 to 2021", color = "Happy level")

```


```{r}
#| message: false
#| warning: false
#| echo: false
#| label: fig-12Graduate
#| fig-cap: "Changes in happiness levels of individuals with graduate education from 1972 to 2021"

# calcualte the people who have graduate degree based on different level of happy
degree_data_5 <- degree_data %>% 
  filter(Degree == "Graduate") %>% 
  group_by(Year, Happy) %>% 
  summarize(People = n())

# generate graph
degree_colors <- c("#E74C3C", "#F1C40F","#8E44AD")

ggplot(degree_data_5, aes(x = Year, y = People, fill = Happy)) +
  geom_line(aes(group = Happy, color = Happy), size = 1.2) +
  scale_fill_manual(values = degree_colors) +
  scale_color_manual(values = degree_colors) +
  labs(x = "Year", y = "Number of respondents", fill = "Happy level", title = "Changes in happiness levels of individuals \nwith graduate education from 1972 to 2021", color = "Happy level")

```


```{r}
#| message: false
#| warning: false
#| echo: false
#| label: fig-13EmployeeStatusVeryHappy
#| fig-cap: "Trends in happiness level (very happy) by employee status from 1972 to 2021"

# calcualte the number of employee status for very happy
employee_status_data_happy1 <- employee_status_data %>% 
  filter(Happy == "Very happy") %>% 
  group_by(Employee_status, Year, Happy) %>% 
  summarize(People = n())

# generate graph
employee_status_colors <- c("#E74C3C", "#2C3E50")

ggplot(employee_status_data_happy1, aes(x = Year, y = People, fill = Employee_status)) +
  geom_line(aes(group = Employee_status, color = Employee_status), size = 1.2) +
  scale_fill_manual(values = employee_status_colors) +
  scale_color_manual(values = employee_status_colors) +
  labs(x = "Year", y = "Number of respondents", fill = "Employee status", title = "Trends in happiness level (very happy) by employee status from 1972 to 2021", color = "Employee status")

```

```{r}
#| message: false
#| warning: false
#| echo: false
#| label: fig-14EmployeeStatusPrettyHappy
#| fig-cap: "Trends in happiness level (pretty happy) by employee status from 1972 to 2021"

# calcualte the number of employee status for pretty happy
employee_status_data_happy2 <- employee_status_data %>% 
  filter(Happy == "Pretty happy") %>% 
  group_by(Employee_status, Year, Happy) %>% 
  summarize(People = n())

# generate graph
employee_status_colors <- c("#E74C3C", "#2C3E50")

ggplot(employee_status_data_happy2, aes(x = Year, y = People, fill = Employee_status)) +
  geom_line(aes(group = Employee_status, color = Employee_status), size = 1.2) +
  scale_fill_manual(values = employee_status_colors) +
  scale_color_manual(values = employee_status_colors) +
  labs(x = "Year", y = "Number of respondents", fill = "Employee status", title = "Trends in happiness level (pretty happy) by employee status from 1972 to 2021", color = "Employee status")
```

```{r}
#| message: false
#| warning: false
#| echo: false
#| label: fig-15EmployeeStatusNotTooHappy
#| fig-cap: "Trends in happiness level (not too happy) by employee status from 1972 to 2021"

# calcualte the number of employee status for not to happy
employee_status_data_happy3 <- employee_status_data %>% 
  filter(Happy == "Not too happy") %>% 
  group_by(Employee_status, Year, Happy) %>% 
  summarize(People = n())

# generate graph
employee_status_colors <- c("#E74C3C", "#2C3E50")

ggplot(employee_status_data_happy3, aes(x = Year, y = People, fill = Employee_status)) +
  geom_line(aes(group = Employee_status, color = Employee_status), size = 1.2) +
  scale_fill_manual(values = employee_status_colors) +
  scale_color_manual(values = employee_status_colors) +
  labs(x = "Year", y = "Number of respondents", fill = "Employee status", title = "Trends in happiness level (not too happy) by employee status from 1972 to 2021", color = "Employee status")
```
```{r}
#| message: false
#| warning: false
#| echo: false
#| label: fig-16MaritalStatusVeryHappy
#| fig-cap: "Trends in Happiness Level (very happy) by Marital Status from 1972 to 2021"

# calcualte the number of marital status for very happy
marital_status_data_happy1 <- marital_status_data %>% 
  filter(Happy == "Very happy") %>% 
  group_by(Marital_status, Year, Happy) %>% 
  summarize(People = n())

# generate graph
marital_status_colors <- c("#E74C3C", "#F1C40F","#2ECC71","#3498DB","#8E44AD")

ggplot(marital_status_data_happy1, aes(x = Year, y = People, fill = Marital_status)) +
  geom_line(aes(group = Marital_status, color = Marital_status), size = 1.2) +
  scale_fill_manual(values = marital_status_colors) +
  scale_color_manual(values = marital_status_colors) +
  labs(x = "Year", y = "Number of respondents", fill = "Marital status", title = "Trends in happiness level (very happy) by marital status from 1972 to 2021", color = "Marital status")
```
```{r}
#| message: false
#| warning: false
#| echo: false
#| label: fig-17MaritalStatusPrettyHappy
#| fig-cap: "Trends in happiness level (pretty happy) by marital status from 1972 to 2021"

# calcualte the number of marital status for pretty happy
marital_status_data_happy2 <- marital_status_data %>% 
  filter(Happy == "Pretty happy") %>% 
  group_by(Marital_status, Year, Happy) %>% 
  summarize(People = n())

# generate graph
marital_status_colors <- c("#E74C3C", "#F1C40F","#2ECC71","#3498DB","#8E44AD")

ggplot(marital_status_data_happy2, aes(x = Year, y = People, fill = Marital_status)) +
  geom_line(aes(group = Marital_status, color = Marital_status), size = 1.2) +
  scale_fill_manual(values = marital_status_colors) +
  scale_color_manual(values = marital_status_colors) +
  labs(x = "Year", y = "Number of respondents", fill = "Marital status", title = "Trends in happiness level (pretty happy) by marital status from 1972 to 2021", color = "Marital status")
```

```{r}
#| message: false
#| warning: false
#| echo: false
#| label: fig-18MaritalStatusNotTooHappy
#| fig-cap: "Trends in happiness level (not too happy) by marital status from 1972 to 2021"

# calcualte the number of marital status for not too happy
marital_status_data_happy3 <- marital_status_data %>% 
  filter(Happy == "Not too happy") %>% 
  group_by(Marital_status, Year, Happy) %>% 
  summarize(People = n())

# generate graph
marital_status_colors <- c("#E74C3C", "#F1C40F","#2ECC71","#3498DB","#8E44AD")

ggplot(marital_status_data_happy3, aes(x = Year, y = People, fill = Marital_status)) +
  geom_line(aes(group = Marital_status, color = Marital_status), size = 1.2) +
  scale_fill_manual(values = marital_status_colors) +
  scale_color_manual(values = marital_status_colors) +
  labs(x = "Year", y = "Number of respondents", fill = "Marital status", title = "Trends in happiness level (not too happy) by marital status from 1972 to 2021", color = "Marital status")
```

```{r}

```



```{r}

```


```{r}

```

# Results

# Discussion

## First discussion point {#sec-first-point}

If my paper were 10 pages, then should be be at least 2.5 pages. The discussion is a chance to show off what you know and what you learnt from all this. 

## Second discussion point

## Third discussion point

## Weaknesses and next steps

Weaknesses and next steps should also be included.

\newpage

\appendix

# Appendix {-}


# Additional details


\newpage


# References


